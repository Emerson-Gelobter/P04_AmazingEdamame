<!DOCTYPE html>
<html>
<head>

  <title>D3 World Map Example</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>

</head>

<body>
  <svg width="800" height="600"></svg>

  <script>
    // Create SVG element
    const svg = d3.select('svg');
    
    // Load GeoJSON data
    d3.json('../static/datasets/Neighborhood.geojson').then((geoData) => {
      // Create projection and path generator
      const projection = d3.geoMercator().fitSize([800, 600], geoData);
      const pathGenerator = d3.geoPath().projection(projection);
      
      // Draw map
      svg.selectAll('path')
        .data(geoData.features)
        .enter().append('path')
        .attr('d', pathGenerator)
        .style('stroke', '#333')
        .style('fill', '#ccc');
    });
    
    // Load latitude longitude data
    d3.csv('data.csv').then((data) => { //need to find a way to query database
      // Plot points on map
      svg.selectAll('circle')
        .data(data)
        .enter().append('circle')
        .attr('cx', (d) => projection([d.longitude, d.latitude])[0])
        .attr('cy', (d) => projection([d.longitude, d.latitude])[1])
        .attr('r', 5)
        .style('fill', 'red');
    });

  </script>
</body>
</html>
