<!DOCTYPE html>
<html>
<head>

  <title>World Map</title>
  <script src="https://d3js.org/d3.v7.min.js"> </script>
</head>

<body>

  <!-- Create an element where the map will take place -->
  <canvas id="dataviz" width="700" height="500"></canvas>
  <script>

  // select the canvas element created in the html.
  var canvas = document.getElementById('dataviz');

  // Actual width and height
  var width = canvas.offsetWidth
  var height = canvas.offsetHeight

  // Set a projection for the map. Projection = transform a lat/long on a position on the 2d map.
  var projection = d3.geoNaturalEarth1()
      .scale(width / 1.3 / Math.PI)
      .translate([width / 2, height / 2])

  // Get the 'context'
  var ctx = canvas.getContext('2d');

  // geographic path generator for given projection and canvas context
  const pathGenerator = d3.geoPath(projection, ctx);

  // Draw a background
  // ctx.fillStyle = '#ddd';
  // ctx.fillRect(0, 0, width, height);

// Load external data and boot
  // d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson").then( function(data) {

  //    // initialize the path
  //   ctx.beginPath();

  //   // Got the positions of the path
  //   pathGenerator(data);

  //   // Fills in the countries
  //   ctx.fillStyle = "#888";
  //   ctx.fill();

  //   // Adds in the borders
  //   ctx.strokeStyle = "#69b3a2";
  //   ctx.stroke()
  // })
    
  </script>

  <div id = "received"></div>
  <script>
  const url = 'http://127.0.0.1:5000/map';

  fetch(url).then(res => res.json()).then(data => {
    // Printing that data to a div in HTML
    document.getElementById('received').innerText = data;
    console.log(data);
  })
</script>

</body>
</html>
